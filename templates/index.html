{% extends 'base.html' %}
{% load static %}
{% block title %}
首页
{% endblock%}


{% block head%}
<link rel="stylesheet" type="text/css" href="{% static 'css/index.css' %}" >
{% endblock%}

{% block central%}
{% csrf_token %}
<!--轮播图-->
<div id="banner" class="carousel slide" data-rade="carouse" >
    <ol class="carousel-indicators">
        <li data-target="#banner" data-slide-to="0" class="active"></li>
        <li data-target="#banner" data-slide-to="1"></li>
        <li data-target="#banner" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="{% static 'img/banner/banner_1.jpg' %}" class="d-md-block w-100" alt="">
        </div>

        <div class="carousel-item">
            <img src="{% static 'img/banner/banner_2.jpg' %}" class="d-md-block w-100" alt="">
        </div>

        <div class="carousel-item">
            <img src="{% static 'img/banner/banner_3.jpg' %}" class="d-md-block w-100" alt="">
        </div>
    </div>
    <a class="carousel-control-prev" href="#banner" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#banner" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>

</div>

<!--商品分类-->
<div class="text-center">
    <a class="navbar-brand goods_category" href="*">
        <img src="{% static 'img/icons/house-door.svg' %}" class="card-img-top">
        <p class="card-text text-dark h6">输入四个</p>
    </a>

    <a class="navbar-brand goods_category" href="*">
        <img src="{% static 'img/icons/search.svg' %}" class="card-img-top">
        <p class="card-text text-dark h6">输入四个</p>
    </a>

    <a class="navbar-brand goods_category" href="*">
        <img src="{% static 'img/icons/cart2.svg' %}" class="card-img-top">
        <p class="card-text text-dark h6">输入四个</p>
    </a>
</div>
<div class="text-center">
    <a class="navbar-brand goods_category" href="*">
        <img src="{% static 'img/icons/person.svg' %}" class="card-img-top">
        <p class="card-text text-dark h6">输入四个</p>
    </a>

    <a class="navbar-brand goods_category" href="*">
        <img src="{% static 'img/icons/image.svg' %}" class="card-img-top">
        <p class="card-text text-dark h6">输入四个</p>
    </a>

    <a class="navbar-brand goods_category" href="*">
        <img src="{% static 'img/icons/image.svg' %}" class="card-img-top">
        <p class="card-text text-dark h6">输入四个</p>
    </a>
</div>

<!--JS动态，点击搜索图片，实时搜索-->
<script>
    //点击搜索图片，跳转商品页并显示搜索商品
    $("#search_img").click(function () {
            window.location.href="http://{{request.get_host}}/cart/cart_search/?search_input="+$("#search_input").val()
        })
    // 实时搜索功能
    $(function (){
        // 键盘输入异步搜索，调用搜索函数
        $("#search_input").keyup(function () {
            $("#search_list").empty();
            $.ajax({
                url: "/cart/cart_search/",
                data: {
                    'search_input':$("#search_input").val(),
                    "csrfmiddlewaretoken": $("[name = 'csrfmiddlewaretoken']").val(),
                },
                type: "POST",
                async: true,
                success:function (goods_name_list) {
                    // console.log(goods_name_list)

                    $.each(goods_name_list,function (key,goods_name) {
                        if ($("#search_input").val() == ''){
                            $("#search_list").empty();
                        }else {
                            addlist(goods_name);
                        }

                    });
                    }
            })
        })

        // 搜索栏添加列表
        function addlist(goods_name) {
            $('<a/>',{
                text:goods_name,
                class:'list-group-item list-group-item-action list-group-item-secondary col-11',
                style:"z-index: 999;opacity:0.95"
            }).appendTo($('#search_list'))
        }
    })
</script>

{% endblock %}



